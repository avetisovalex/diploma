#coding=utf-8
#:kivy 1.0.4
#:import os os
#:import ScrollView kivy.uix.scrollview


#self.height*0.1
#self.width*0.1
<LoginScreen>:	
	BoxLayout:
		orientation: 'vertical'
		padding: self.width*0.15,self.height*0.1,self.width*0.15,self.height*0.1
		spacing: self.height*0.02
		Image:
			size_hint:1,7
			source:'1.png'
			allow_stretch:True
		TextInput:
			hint_text: 'user name'
			id:'user name'
			multiline: False
		TextInput:
			hint_text:'password'
			id:'password'
			multiline: False
			password:True
		BoxLayout:
			orientation: 'horizontal'
			CheckBox:
				id:'check'
			Label:
				size_hint: 6, 1
			Label:
				size_hint: 4, 1
				text: 'Запомнить'
	    Button:
			text: 'Войти в систему'
			on_release: root.enter_system()
        Button:
            text: 'Зарегистрироваться'
            on_release: root.reg()
			
<AuthorizationScreen>:
	BoxLayout:
		canvas:
			Color:
				rgb:0.859,0.357,0.259
			Line:
				points: self.width*0.12,self.height*0.42,self.width*0.88,self.height*0.42
				width: self.height*0.003
				
		orientation: 'vertical'
		padding: self.width*0.15,self.height*0.03,self.width*0.15,self.height*0.03
		spacing: self.height*0.02
		Label:
			halign: 'center'
			text: 'Пожалуйста, введите информацию\nо вашей учетной записи'
		TextInput:
			hint_text: 'user name*'
			id:'name'
			readonly: False
			multiline: False
		TextInput:
			hint_text:'e-mail*'
			id:'e-mail'
			multiline: False
		TextInput:
			hint_text:'password*'
			id:'password'
			multiline: False
		TextInput:
			hint_text:'re-enter password*'
			id:'re_password'
			multiline: False
		TextInput:
			hint_text:'+7 911 111-11-11'
			id:'phone'
			multiline: False
		BoxLayout:
			orientation: 'horizontal'
			spacing:self.width*0.12
			Button:
				text:'Смс-код'
				size_hint: 5, 1
				on_release: root.code_sms()
			TextInput:
				hint_text:'1111'
				id:'code'
				size_hint: 3, 1
			CheckBox:
				id:'code_check'
		Label:
			halign: 'center'
			text: 'Пожалуйста, введите данные\nобщего пространства'
		TextInput:
			hint_text: 'name'
			id:'space_name'
			multiline: False
		TextInput:
			hint_text:'password'
			id:'space_password'
			multiline:False
			password:True
#		GridLayout:
#			cols:2
#			CheckBox:
#				group:'space'
#			Label:
#				size_hint_x:5
#				text:'Новое пространство'
#			CheckBox:
#				group:'space'
#			Label:
#				text:'Присоединиться'
		BoxLayout:
			orientation: 'horizontal'
			spacing:self.width*0.12
			ToggleButton:
				text:'New'
				group:'space'
#				background_normal: 'atlas://images/1/myatlas/button'
				id:'new_space'
#				background_normal:'adddd.png'
#				background_down:'add_down.png'
			Label:
				size_hint: 2, 1
			ToggleButton:
				text:'Old'
				group:'space'
				id:'cur_space'
		Button:
            text: 'Зарегистрироваться'
			on_release: root.register()
<MainScreen>:
	BoxLayout:
		orientation: 'vertical'
		canvas:
			Color:
				rgb:0.859,0.357,0.259
			Rectangle:
				pos: 0, self.height*0.9
				size: self.width,self.height*0.1
		StackLayout:
			size_hint:1,.2
			orientation: 'tb-lr'
			spacing:self.width*0.02
			Button:
				on_release:root.manager.current = 'menu'
				size_hint:.2,.5
			Label:
				text: 'Мой холодильник'
				size_hint:.6,.5
				bold:True
			Image:
				source:'1.png'
				size_hint:.2,.5
				allow_stretch:True
		BoxLayout:
			size_hint:1,.8
			orientation: 'vertical'
			padding: self.width*0.15,-self.height*0.1,self.width*0.15,self.height*0.1
			spacing: self.height*0.02
			Label:
				text:'Текущие задания'
			ScrollView:
				size_hint:1,4
            Label:
				text:'Продукты в холодильнике'
			Spinner:
				
			ScrollView:
				size_hint:1,4
            
<TasksScreen>:
    BoxLayout:
		orientation: 'vertical'
		canvas:
			Color:
				rgb:0.859,0.357,0.259
			Rectangle:
				pos: 0, self.height*0.9
				size: self.width,self.height*0.1
		StackLayout:
			size_hint:1,.2
			orientation: 'tb-lr'
			spacing:self.width*0.02
			Button:
				on_release:root.manager.current = 'menu'
				size_hint:.2,.5
			Label:
				text: 'Мои задания'
				size_hint:.6,.5
				bold:True
			Image:
				source:'1.png'
				size_hint:.2,.5
				allow_stretch:True
		BoxLayout:
			size_hint:1,.8
			orientation: 'vertical'
			padding: self.width*0.15,-self.height*0.1,self.width*0.15,self.height*0.1
			spacing: self.height*0.02
			ScrollView:
			
<TaskEditScreen>:
    BoxLayout:
		orientation: 'vertical'
		canvas:
			Color:
				rgb:0.859,0.357,0.259
			Rectangle:
				pos: 0, self.height*0.9
				size: self.width,self.height*0.1
		StackLayout:
			size_hint:1,.2
			orientation: 'tb-lr'
			spacing:self.width*0.02
			Button:
				on_release:root.manager.current = 'menu'
				size_hint:.2,.5
			Label:
				text: 'Изменить задание'
				size_hint:.6,.5
				bold:True
				id:title
			Image:
				source:'1.png'
				size_hint:.2,.5
				allow_stretch:True
		BoxLayout:
			size_hint:1,.8
			orientation: 'vertical'
			padding: self.width*0.15,-self.height*0.1,self.width*0.15,self.height*0.1
			spacing: self.height*0.02
			TextInput:
				hint_text:'Title'
				size_hint:1,.3
			ScrollView:
				size_hint:4,1
			Label:
				halign:'center'
				text:'Выберите пользователей, которым\nбудет доступно задание и смс'
				size_hint:1,0.5
			GridLayout:
				cols:4
				id:grid
			Button:
				size_hint:1,.3
				text:'Создать'
				on_release: root.create_task()
				
<ProductsScreen>:
    BoxLayout:
		orientation: 'vertical'
		canvas:
			Color:
				rgb:0.859,0.357,0.259
			Rectangle:
				pos: 0, self.height*0.9
				size: self.width,self.height*0.1
		StackLayout:
			size_hint:1,.2
			orientation: 'tb-lr'
			spacing:self.width*0.02
			Button:
				on_release:root.manager.current = 'menu'
				size_hint:.2,.5
			Label:
				text: 'Мои продукты'
				size_hint:.6,.5
				bold:True
			Image:
				source:'1.png'
				size_hint:.2,.5
				allow_stretch:True
		BoxLayout:
			size_hint:1,.8
			orientation: 'vertical'
			padding: self.width*0.15,-self.height*0.1,self.width*0.15,self.height*0.1
			spacing: self.height*0.02
			StackLayout:
				size_hint:1,.1
				orientation: 'lr-tb'
				spacing:self.width*0.01
				ToggleButton:
					size_hint:.24,1
					group:'sort'
				ToggleButton:
					size_hint:.24,1
					group:'sort'
				ToggleButton:
					size_hint:.24,1
					group:'sort'
				ToggleButton:
					size_hint:.24,1
					group:'sort'
			ScrollView:
				id:products_view
			
<ProductsInfScreen>:
    BoxLayout:
		orientation: 'vertical'
		canvas:
			Color:
				rgb:0.859,0.357,0.259
			Rectangle:
				pos: 0, self.height*0.9
				size: self.width,self.height*0.1
		StackLayout:
			size_hint:1,.2
			orientation: 'tb-lr'
			spacing:self.width*0.02
			Button:
				on_release:root.manager.current = 'menu'
				size_hint:.2,.5
			Label:
				text: 'Информация'
				size_hint:.6,.5
				bold:True
			Image:
				source:'1.png'
				size_hint:.2,.5
				allow_stretch:True
		BoxLayout:
			size_hint:1,.5
			orientation: 'horizontal'
			padding: self.width*0.15,-self.height*0.1,self.width*0.15,self.height*0.1
			spacing: self.height*0.02
			BoxLayout:
				size_hint:1,.8
				orientation: 'vertical'
				padding: self.width*0.15,-self.height*0.1,self.width*0.15,self.height*0.1
				spacing: self.height*0.02
				id:left_colunm
			BoxLayout:
				size_hint:1,.8
				orientation: 'vertical'
				padding: self.width*0.15,-self.height*0.1,self.width*0.15,self.height*0.1
				spacing: self.height*0.02
				id:right_column
		BoxLayout:
			size_hint:1,.3
			orientation: 'vertical'
			padding: self.width*0.15,-self.height*0.1,self.width*0.15,self.height*0.1
			spacing: self.height*0.02
			Label:
				text:'Описание товара'
				halign:'left'
				text_size:self.width,None
				bold:True
			Label:
				text:'Производитель ОАО'
				id:description
				halign:'left'
				text_size:self.width,None
			Label:
				text:'Заметки'
				halign:'left'
				text_size:self.width,None
				bold:True
			TextInput:
				hint_text:'Yours comments about this product'
				id:comments

<SettingsScreen>:
	BoxLayout:
		orientation: 'vertical'
		canvas:
			Color:
				rgb:0.859,0.357,0.259
			Rectangle:
				pos: 0, self.height*0.9
				size: self.width,self.height*0.1
			Line:
				points: self.width*0.03,self.height*0.75,self.width*0.97,self.height*0.75
				width: self.height*0.003
			Line:
				points: self.width*0.03,self.height*0.39,self.width*0.97,self.height*0.39
				width: self.height*0.003
		StackLayout:
			size_hint:1,.2
			orientation: 'tb-lr'
			spacing:self.width*0.02
			Button:
				on_release:root.manager.current = 'menu'
				size_hint:.2,.5
			Label:
				text: 'Настройки'
				size_hint:.6,.5
				bold:True
			Image:
				source:'1.png'
				size_hint:.2,.5
				allow_stretch:True
		BoxLayout:
			size_hint:1,.8
			orientation: 'vertical'
			padding: self.width*0.05,-self.height*0.12,self.width*0.05,self.height*0.01
			spacing: self.height*0.02
			Label:
				size_hint_y:.06
				halign:'left'
				text_size:self.width,None
				bold:True
				text:'Учетные записи'
			Spinner:
				size_hint_y:.06
				id:record_spin
			Label:
				size_hint_y:.06
				bold:True
				text:'Совместные пользователи'
				halign:'left'
				text_size:self.width,None
			GridLayout:
				size_hint_y:.3
				cols:2
				id:users_grid
			Label:
				size_hint_y:.06
				bold:True
				text:'Параметры рассылки смс'
				halign:'left'
				text_size:self.width,None
			GridLayout:
				size_hint_y:.06
				cols:2
				Label:
					text:'Регулярная рассылка'
					halign:'left'
					text_size:self.width,None
				Switch:
					size_hint_x:.6
					id:switch_sms
					active:True

			GridLayout:
				size_hint_y:.06
				cols:7
				ToggleButton:
					text:'ПН'
				ToggleButton:
					text:'ВТ'
				ToggleButton:
					text:'СР'
				ToggleButton:
					text:'ЧТ'
				ToggleButton:
					text:'ПТ'
				ToggleButton:
					text:'СБ'
				ToggleButton:
					text:'ВС'
			GridLayout:
				size_hint_y:.1
				cols:2
				Slider:
					size_hint_x: 4
					padding:20
					id:hour_slider
					max:23
					value:12
#					on_value:hour_text.text=str(int(self.value))
				
				TextInput:
					text:str(int(hour_slider.value))
					id:hour_text
#					on_text:hour_slider.value=float(int(self.text))
				Slider:
					size_hint_x: 4
					padding:20
					id:minute_slider
					max:59
					value:0
					step:10
				
				TextInput:
					id:minute_text
					text:str(int(minute_slider.value))
#					on_text:minute_slider.value=float(int(self.text))
					
			Button:
				size_hint_y:.06
				text:'Сохранить'
				on_release:root.save_settings()
				
<StatisticsScreen>:
    BoxLayout:
		orientation: 'vertical'
		canvas:
			Color:
				rgb:0.859,0.357,0.259
			Rectangle:
				pos: 0, self.height*0.9
				size: self.width,self.height*0.1
		StackLayout:
			size_hint:1,.2
			orientation: 'tb-lr'
			spacing:self.width*0.02
			Button:
				on_release:root.manager.current = 'menu'
				size_hint:.2,.5
			Label:
				text: 'Статистика'
				size_hint:.6,.5
				bold:True
			Image:
				source:'1.png'
				size_hint:.2,.5
				allow_stretch:True
		BoxLayout:
			size_hint:1,.8
			orientation: 'vertical'
			padding: self.width*0.15,-self.height*0.1,self.width*0.15,self.height*0.1
			spacing: self.height*0.02
			GridLayout:
				cols:2
				Label:
					text:'Выбрать'
					halign:'left'
					text_size:self.width,None
				Spinner:
					id:spin_products
				Label:
					text:'за период'
					halign:'left'
					text_size:self.width,None
				Spinner:
					id:spin_period
				Label:
					text:'по параметру'
					halign:'left'
					text_size:self.width,None
				Spinner:
					id:spin_param
			Image:
				size_hint:1,3
				id:image
			Label:
				id:summary
			Button:
				text:'Показать статистику'
				on_release:root.show_stat()
	
<AboutScreen>:
    BoxLayout:
		orientation: 'vertical'
		canvas:
			Color:
				rgb:0.859,0.357,0.259
			Rectangle:
				pos: 0, self.height*0.9
				size: self.width,self.height*0.1
		StackLayout:
			size_hint:1,.2
			orientation: 'tb-lr'
			spacing:self.width*0.02
			Button:
				on_release:root.manager.current = 'menu'
				size_hint:.2,.5
			Label:
				text: 'О программе'
				size_hint:.6,.5
				bold:True
			Image:
				source:'1.png'
				size_hint:.2,.5
				allow_stretch:True
		FloatLayout:
			size_hint:1,.8
#			orientation: 'vertical'
#			padding: self.width*0.15,-self.height*0.1,self.width*0.15,self.height*0.1
#			spacing: self.height*0.02	
			Label:
				pos: 0,self.height*0.5
#				size: .7,.7
				valign:'top'
				text:'Это приложение поможет Вам\nудобно и эффективно управлять\nсодержимым своего холодильника'
<MenuScreen>:
	StackLayout:
	    orientation:'lr-tb'
		minimum_width: .7
		canvas:
			Color:
				rgb: 0.345, 0.345, 0.345
			Rectangle:
				pos: self.pos
				size: self.size
		Button:
            text: 'User'
			size_hint: .5,.1
		Button:
            text: 'Настр.'
			size_hint: .2,.1
			on_release: root.manager.current = 'settings'
		Button:
            text: 'Главная'
			size_hint: .7,.1
			on_release: root.manager.current = 'main'
		Button:
            text: 'Задания'
			size_hint: .5,.1
			on_release: root.manager.current = 'tasks'
		Button:
            text: 'Доб.'
			size_hint: .2,.1
			on_release: root.manager.current = 'task_edit'
		Button:
            text: 'Продукты'
			size_hint: .7,.1
			on_release: root.manager.current = 'products'
		Button:
            text: 'Статистика'
			size_hint: .7,.1
			on_release: root.manager.current = 'statistics'
		Button:
            text: 'О программе'
			size_hint: .7,.1
			on_release: root.manager.current = 'about'
		Button:
            text: 'Выйти'
			size_hint: .7,.1
			on_release: root.on_exit()	  
